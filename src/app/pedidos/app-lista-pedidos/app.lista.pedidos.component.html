<div class="grid">
  <div class="col-12">
    <div class="card">
      <h5>{{cardTittle}}</h5>

      <p-dataView
        #dv
        [value]="pedidoPage.content"
        [rows]="6"
        layout="grid"
        [loading]="isLoading "

        [emptyMessage]=" isLoading ?' ':  'Nenhum pedido foi encontrado.' "
        [paginator]="true"
        [alwaysShowPaginator]="true"
        [lazy]="true"
        [totalRecords]="totalRecords"
        (onLazyLoad)="paging($event)"
      >

        <ng-template pTemplate="header">
          <div  class="grid grid-nogutter flex-column md:flex-row justify-content-between">

            <span class="p-input-icon-left mb-2 md:mb-0">
              <i class="pi pi-search"></i>
              <input type="search"  pInputText placeholder="Procurar" (keyup)="pesquisarPedido($event)" />
            </span>

            <p>Apresentando pedidos de </p>
          </div>
        </ng-template>


        <ng-template let-pedido pTemplate="gridItem">
					<div class="col-12 md:col-4">
						<div class="card m-2 border-1 surface-border">
							<div class="flex align-items-center justify-content-between">

								<div class="flex align-items-center">
									<i class="pi pi-tag mr-2"></i>
									<span class="font-semibold">Pedido {{pedido.id}}</span>
								</div>


                <div [ngSwitch]="pedido.status_pedido">
                  <span *ngSwitchCase="'CONCLUIDO'" [class]="'sm:ml-2 product-badge status-instock'" >CONCLUÍDO</span>
                  <span *ngSwitchCase="'CRIADO'" [class]="'sm:ml-2 product-badge status-lowstock'">PENDENTE</span>
                </div>

							</div>

							<div class="text-center">

                <div class="mb-3" style="margin-top: 12px;"></div>

                <div class="flex align-items-center">
                  <span class="font-semibold">Itens do pedido:</span>
                </div>

                <ul class="mb-3" *ngFor="let i of pedido.items" style="margin-top:14px ;">
                   <li>  {{i.descricao}}</li>
                </ul>

                <div class="flex align-items-center">
                  <span class="font-semibold">Cliente:</span>
                  <span>{{pedido.cliente.nome}}</span>
                </div>


                  <div class="mb-3" style="margin-top: 12px;"></div>

                  <div class="flex align-items-center">
                    <span class="font-semibold">Data de criação:</span>
                    <span>{{'2020-10-12'}}</span>
                  </div>

                  <div class="mb-3" style="margin-top: 12px;"></div>
                  <div class="flex align-items-center">
                    <span class="font-semibold">Hora de criação:</span>
                    <span>{{'22:30'}}</span>
                  </div>

                  <div class="mb-3" style="margin-top: 12px;"></div>

							</div>
							<div class="flex align-items-center justify-content-between" *ngIf="pedido.status_pedido!='CONCLUIDO'">
								<p-button ><i class="pi pi-fw pi-check-square" style="margin-right:8px ;"> </i>concluir</p-button>
                <!-- <br> -->
                <button pButton  class="p-button-secondary " (click)="openMessageBox(pedido)" ><i class="pi pi-fw  pi-envelope"> </i></button>

							</div>
						</div>
					</div>
				</ng-template>

      </p-dataView>
    <!-- </div> -->

      <p-dialog [(visible)]="dialogVisisble" [header]="'Escrever mensagem para '+getPrimeiroNome(pedidoSeleccionado.cliente.nome)"
      [style]="{width: '40vw'}" position="center" [breakpoints]="{'960px': '75vw'}"  showEffect="fade">

        <div class="grid">
          <div class="col-12">

            <div class="col-12">
        <textarea rows="3" [cols]=" layoutService.isDesktop()? '55': '30'" placeholder="Mensagem" pInputTextarea></textarea>
            </div>

          <div style="margin-left:12px ;">
            <div class="field-checkbox">
              <p-checkbox name="group1" value="Marcar pedido como concluido" ></p-checkbox>
              <label for="ny">Marcar pedido como concluído</label>
            </div>

           <button pButton  class="p-button-secondary " [draggable]="true" (click)="sendMessage()">
            <i class="pi pi-fw  pi-send"></i> Enviar
          </button>
        </div>

        </div>
     </div>

      </p-dialog>
    </div>
  </div>
</div>
